# Maintainer:   danyf90 <daniele.formichelli@gmail.com>
# Contributors: rudefyet <matt@freedomwarepc.com>
# Contributors: Farhad Shahbazi <farhad@enthusiasm.cc>,Lucky <archlinux@builds.lucky.li>

pkgname=puddletag
pkgver=1.0.5
pkgrel=1
pkgdesc="An audio tag editor for GNU/Linux (like Mp3tag)"
url="http://puddletag.sourceforge.net"
license=("GPL")
arch=("x86_64")
depends=('chromaprint' 'mutagen' 'python2-configobj' 'python2-musicbrainz2' 'python2-pyparsing' 'python2-pyqt4')
optdepends=('python2-pillow: FLAC cover art'
            'quodlibet: QuodLibet library support')
source=("http://downloads.sourceforge.net/project/$pkgname/$pkgname-$pkgver.tar.gz")
sha512sums=('c689de6820286011fd3777b53ba60649dd2c014b497d2018aa3103e0aa02e3ab879928d8fe86d2aba674c06f26a143e7c61c92647ac458f673f7066cf7738c4f')
screenshot="http://puddletag.sourceforge.net/_images/5.png"

prepare() {
  patch -Np2 -i ../puddletag-pyqt4.11.4.patch
  sed -i 's|^#!.*python$|#!/usr/bin/python2|' $(grep -rl '^#!.*python')
}

build() {
  cd $srcdir/$pkgname-$pkgver

  python2 setup.py config
}

package() {
  cd $srcdir/$pkgname-$pkgver

  python2 setup.py install --root=$pkgdir --optimize=1
}

